<!DOCTYPE html>
<html>
<head>

    <title>Canvas jsPDF</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script type="text/javascript" src="JsBarcode.all.js"></script>
    <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
    <script  type="text/javascript" src="jspdf.min.js"></script>
    <script  type="text/javascript" src="html2canvas.js"></script>
 
 </head>

<body>

  <h1>jsPDF exapmle</h1>
  <a href="javascript:genPDF()">download PDF</a> 
  <button onclick="genPDF()">click here</button>
 
  <div id="testDiv">
    <div id="items">
    <h1>This is picture</h1>
    <img id="barcode" />
    <pre>
      This dsgdfgdfg
      is my cahskjdhd
      dfdfgdgdgdfgdfgdfgdfg
      dfgdfgdfgdg dfgjhry df
      hf yjuty hf fsd
    </pre>

    <h1>This is picture</h1>
    <img id="barcode" />
    <pre>
      This dsgdfgdfg
      is my cahskjdhd
      dfdfgdgdgdfgdfgdfgdfg
      dfgdfgdfgdg dfgjhry df
      hf yjuty hf fsd
    </pre>
  </div>
</div>


</body>


<script type="text/javascript">

  JsBarcode("#barcode", "SPYF235");


    function genPDF() {
    html2canvas(document.getElementById('testDiv')).then(function(canvas) {
   // html2canvas(document.body).then(function(canvas) {
                var img = canvas.toDataURL('image/png');
                var doc = new jsPDF('portrait', 'pt', 'a4');
                doc.addImage(img, 'JPEG', -15, -15);
                doc.addPage();
                doc.text(20, 20, 'Hi again this I page two');
                doc.save('test.pdf');
            });

}
 </script>

</html>